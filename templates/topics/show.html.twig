{% extends 'base.html.twig' %}

{% block title %}Topics{% endblock %}

{% block body %}



  <br>
	<h2 class="navbar" >
  Sujet : {{topic.subject}}
  <a href="{{ path('topics_index') }}" class="float-right btn btn-outline-primary ml-2" >Retour à la liste</a>
</h2>
  <br>
    <div class="card">
    	    <div class="card-body">
    	        <div class="row">
            	    <div class="col-2">
                      <p> <a class="float-left"><strong>{{topic.author.username}}</strong></a></p>
            	        <p class=" float-left ext-secondary">{{topic.editedAt ? topic.editedAt|date("d/m/Y H:i", "Europe/Paris") : '' }}</p>
            	    </div>

                  <div class="col-md-8">
            	        <p> {{topic.content|raw}}</p>
            	    </div>
                  {% if topic.author == app.user %}
                     <div class="col-2">
                       <a class="btn far fa-edit" href="{{ path('topics_edit', {'id': topic.id}) }}"></a>
                       {{ include('topics/_delete_form.html.twig') }}
                     </div>
                  {% endif %}
    	        </div>

              {% for commentaire in topic.commentaires %}


    	        	<div class="card card-inner">
                	    <div class="card-body">
                	        <div class="d-flex flex-row">
                        	    <div class="col-2">
                                <p><a class="float-left"><strong>{{commentaire.author.username }}</strong></a></p>
                        	        <p class=" float-left ext-secondary">{{commentaire.editedAt ? commentaire.editedAt|date("d/m/Y H:i", "Europe/Paris") : '' }}</p>
                        	    </div>
                        	    <div class="col-8">
                        	        {{commentaire.content|raw}}
                        	    </div>
                              <div class="col-2">
                              {% if commentaire.author == app.user %}
                                 <div class="clearfix">
                                   <a class="btn far fa-edit" href="{{ path('commentaires_edit', {'id': commentaire.id , 'topicId': commentaire.subject.id }) }}"> </a>
                                   {{ include('commentaires/_delete_form.html.twig') }}
                                 </div>
                              {% endif %}
                            </div>
                	        </div>
                	    </div>
    	            </div>


                  <br>

                  {% endfor %}



                  <div class="d-flex justify-content-between">
                  <a href="{{ path('topics_index') }}" class="float-right btn btn-outline-primary ml-2" >Retour à la liste</a>
                  <a href="{{ path('commentaires_new', { topicId : topic.id}) }}"class="float-right btn btn-outline-primary ml-2"> <i class="fa fa-reply"></i> Répondre</a>
                  </div>


    	    </div>
    	</div>




{% endblock %}
